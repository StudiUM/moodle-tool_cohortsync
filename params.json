{
  "name": "Moodle-tool cohortsync",
  "tagline": "",
  "body": "### Plugin description\r\n***\r\n\r\n\r\nThis plugin allows the synchronization of cohorts and members in cohorts from the command line.\r\nThere are 2 scripts CLI to do the synchronization.\r\n1. cohortsync.php\r\n2. cohortmembersync.php\r\n\r\n## The plugin configuration page\r\n***\r\nThere are two level configuration:\r\n\r\n### **Settings for cohorts synchronization**\r\n\r\n* CSV delimiter: CSV delimiter of the cohorts file, this option will be used as default value if no delimiter option given for the CLI\r\n\r\n* encoding: The type of encoding file, this option will be used as default value if no encoding option given for the CLI\r\n\r\n* default category: the default context category of the cohorts, if in the cohorts CSV file the category context is not filled or not found, this category will be used.\r\n\r\n### **Settings for cohorts members synchronization**\r\n\r\n* User identifier: This parameter is used to identify the user who will be added to the cohort, those values are allowed: id, username, idnumber. If the param useridentifier is no given to the CLI script, this value will be used.\r\n\r\n* Cohort identifier: This parameter is used to identify the cohort in which to insert the member, those values are allowed: id, name, idnumber. If the param cohortidentifier is no given to the CLI script, this value will be used.\r\n\r\n* CSV delimiter: Delimiter of the cohorts members file, this option will be used as default value if no delimiter option given for the CLI\r\n\r\n* encoding: The type of encoding file, this option will be used as default value if no encoding option given for the CLI\r\n\r\n\r\n## Formats description\r\n***\r\n\r\n### Cohorts synchronization\r\n\r\nSince cohort synchronization is based on Upload cohorts (core), the full description is found [here](https://docs.moodle.org/31/en/Upload_cohorts)\r\n\r\n### Cohorts members synchronization\r\n\r\nThe file is a comma separated file (or any other delimiter set in the plugin page settings or as a param in the script CLI) assumed to have three fields per line:\r\n\r\n    operation, cohortidentifier, useridentifier\r\n\r\nwhere:\r\n\r\n* operation - add | del\r\n* role - student | teacher | teacheredit\r\n* user idnumber - idnumber in the user table NB not id\r\n* course idnumber - idnumber in the course table NB not id\r\n* starttime - start time (in seconds since epoch) - optional\r\n* endtime - end time (in seconds since epoch) - optional\r\n\r\nIt could look something like this:\r\n<pre class=\"informationbox\">\r\n   add, cohort1id, username1\r\n   add, cohort2id, username2\r\n   add, cohort2id, username3\r\n   del, cohort3id, username4\r\n   del, cohort4id, username5\r\n   add, cohort4id, username5\r\n</pre>\r\n\r\nIf the \"contextid\" is not found the context system will be used\r\n\r\nAll fields except the user (user_id, user_idnumber, username), are associated with cohort\r\n\r\n    name,idnumber,description,descriptionformat,category_name,visible,username\r\n\r\nWe can use the \"category_name\" to get the context, if the category is not found the system context will be used\r\nYou can also replace the \"category_name\" by \"category_path\", \"category_id\" or \"category_idnumber\"\r\n\r\n### Usage\r\n***\r\n\r\nTo see the cli script help:\r\n    php admin/tool/cohortsync/cli/cohortsync.php --help\r\n\r\n![cohortsync-Help](http://shorturl.ca/images/cohortsync.PNG)\r\n\r\nWe can use the plugin in several ways\r\nConfigure the plugin with \"The path to the file source\" specified, in this case, we can just run the command:\r\n\r\n    php admin/tool/cohortsync/cli/cohortsync.php\r\n\r\nrun the command with params:\r\n\r\n    php admin/tool/cohortsync/cli/cohortsync.php --filepath=/pathfile/ --csvdelimeter=comma --createcohort=true --useridentifier=username --context=system\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}