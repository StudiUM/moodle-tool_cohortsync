{
  "name": "Moodle-tool cohortsync",
  "tagline": "",
  "body": "### Plugin description\r\n***\r\n\r\n\r\nThis plugin allows the synchronization of cohorts and members in cohorts from the command line.\r\nThere are 2 scripts CLI to do the synchronization.\r\n\r\n1. cohortsync.php\r\n1. cohortmembersync.php\r\n\r\n## The plugin configuration page\r\n***\r\nThere are two level configuration:\r\n\r\n### **Settings for cohorts synchronization**\r\n\r\n* CSV delimiter: CSV delimiter of the cohorts file, this option will be used as default value if no delimiter option given for the CLI\r\n\r\n* encoding: The type of encoding file, this option will be used as default value if no encoding option given for the CLI\r\n\r\n* default category: the default context category of the cohorts, if in the cohorts CSV file the category context is not filled or not found, this category will be used.\r\n\r\n### **Settings for cohorts members synchronization**\r\n\r\n* User identifier: This parameter is used to identify the user who will be added to the cohort, those values are allowed: id, username, idnumber. If the param useridentifier is no given to the CLI script, this value will be used.\r\n\r\n* Cohort identifier: This parameter is used to identify the cohort in which to insert the member, those values are allowed: id, name, idnumber. If the param cohortidentifier is no given to the CLI script, this value will be used.\r\n\r\n* CSV delimiter: Delimiter of the cohorts members file, this option will be used as default value if no delimiter option given for the CLI\r\n\r\n* encoding: The type of encoding file, this option will be used as default value if no encoding option given for the CLI\r\n\r\n\r\n![Plugin configuration page](http://shorturl.ca/images/configpluginpage.PNG)\r\n\r\n## Formats description\r\n***\r\n\r\n### Cohorts synchronization\r\n\r\nSince cohort synchronization is based on Upload cohorts (core), the full description is found [here](https://docs.moodle.org/31/en/Upload_cohorts)\r\n\r\n### Cohorts members synchronization\r\n\r\nThe file is a comma separated file (or any other delimiter set in the plugin page settings or as a param in the script CLI) assumed to have three fields per line:\r\n\r\n    operation, cohortidentifier, useridentifier\r\n\r\nwhere:\r\n\r\n* operation - add | del\r\n* cohortidentifier - it could be the cohort id, cohort name or cohort idnumber\r\n* useridentifier  - it could be the user id, user username or user idnumber\r\n\r\nIt could look something like this:\r\n<pre>\r\n   add, cohort1id, username1\r\n   add, cohort2id, username2\r\n   add, cohort2id, username3\r\n   del, cohort3id, username4\r\n   del, cohort4id, username5\r\n   add, cohort4id, username5\r\n</pre>\r\n\r\n## Usage\r\n***\r\n\r\n### Cohort synchronization\r\n\r\nTo synchronize cohorts from script CLI, you have to execute the script like this:\r\n\r\n    php admin/tool/cohortsync/cli/cohortsync.php --filepath=/pathfile/ --csvdelimeter=comma --csvencoding=UTF-8 --context=system\r\n\r\n* filepath: The location of the csv file to be processed.\r\n* context: If the \"context\" is not found the default context in page settings will be used.\r\n* csvdelimeter: the csv delimiter, if not given the default value in the page settings will be used.\r\n* csvencoding: the file encoding, if not given the default value in the page settings will be used.\r\n\r\nHere an example of csv file that can be used:\r\n<pre>\r\nname,idnumber,description,category,visible\r\ncohort name 1,cohortid1,first description,,\r\ncohort name 2,cohortid2,,,\r\ncohort name 3,cohortid3,,Miscellaneous,no\r\ncohort name 4,cohortid4,,CAT1,yes\r\ncohort name 5,cohortid5,,CAT2,0\r\ncohort name 6,cohortid6,,CAT3,1\r\n</pre>\r\n\r\nFor more details about the script CLI, run this command:\r\n\r\n    php admin/tool/cohortsync/cli/cohortsync.php --help\r\n\r\n![Cohort sync help](http://shorturl.ca/images/cohortsync.PNG)\r\n\r\n### Cohort member synchronization\r\n\r\nTo synchronize cohorts members from script CLI, you have to execute the script like this:\r\n\r\n    php admin/tool/cohortsync/cli/cohortmembersync.php --filepath=/pathfile/ --cohortidentifier=name --useridentifier=id --flatfiledelimiter=comma --flatfileencoding=UTF-8\r\n\r\n* filepath: The location of the flatfile to be processed.\r\n* cohortidentifier: Which field will be used to identify cohort, if not given the default value in the page settings will be used.\r\n* useridentifier: Which field will be used to identify user, if not given the default value in the page settings will be used\r\n* flatfiledelimite: the file delimiter, if not given the default value in the page settings will be used.\r\n* flatfileencoding: the file encoding, if not given the default value in the page settings will be used.\r\n\r\nHere an example of flatfile that can be used:\r\n<pre>\r\n   add, my cohort A, 2\r\n   add, my cohort A, 3\r\n   add, my cohort B, 6\r\n   del, my cohort B, 14\r\n   del, my cohort C, 75\r\n   add, my cohort C, 30\r\n</pre>\r\n\r\nFor more details about the script CLI, run this command:\r\n\r\n    php admin/tool/cohortsync/cli/cohortmembersync.php --help\r\n\r\n![Cohort sync help](http://shorturl.ca/images/cohortmembersync.PNG)\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}